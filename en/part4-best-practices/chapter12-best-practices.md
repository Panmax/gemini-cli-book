# Part 4: Best Practices and Future Outlook

Congratulations! You have completed all the core features and practical exercises in this book. In this final part, we will take a step back to discuss, from a higher perspective, how to maximize the capabilities of Gemini CLI and look forward to the future of AI in command-line tools.

---

# Chapter 11: Best Practices and Usage Tips

Mastering the features of a tool is just the first step. What truly determines how far you can go are the methods and philosophies you adopt when using it. This chapter will share a series of proven best practices and advanced techniques to help you build an effective mental model for collaborating with AI.

## How to Write Effective Prompts (Prompt Engineering)

The prompt is the sole bridge of communication between you and the AI, and its quality directly determines the quality of the output. Writing good prompts is both an art and a science, often referred to as "Prompt Engineering."

Here are some core principles:

**1. Assign a Role:**
When starting a conversation, assign a role to the AI. This can greatly help the model calibrate the style, focus, and depth of its responses.

*   **Poor Prompt:** `Explain JavaScript closures.`
*   **Good Prompt:** `You are a senior JavaScript teaching expert. Please use a vivid analogy to explain what a closure is to a developer who has some programming background but is unclear about the concept.`

**2. Provide Sufficient Context:**
This is something we have repeatedly emphasized in previous chapters. Don't make the AI guess. Use the `@` symbol, the `GEMINI.md` file, and clear background descriptions to provide it with all relevant information. The richer the context, the more accurate the answer.

**3. Break Down Tasks:**
For complex tasks, avoid writing a single, all-encompassing "mega-prompt." Instead, break the task down into multiple logical steps and guide the AI through them in a continuous, step-by-step conversation. This "chain of thought" approach is more aligned with how humans solve problems and makes it easier to correct and adjust at intermediate steps.

**4. Specify the Output Format:**
If you want the output in a specific format, state it clearly in your prompt.

*   `Please compare the main differences between React and Vue in a Markdown table.`
*   `Please generate JSDoc-style documentation comments for this function.`
*   `Please return a JSON object containing the keys 'name' and 'version'.`

**5. Iterate and Refine:**
Don't expect to get the perfect answer on the first try. Excellent results often come from multiple iterations and refinements. If the first response is not ideal, think about which part of your prompt was unclear, and then ask again with more precise requirements.

## Treat Interactions with Gemini CLI as a Formal Software Engineering Process

Many beginners treat AI assistants as a toy for casual Q&A, but this limits their potential. We recommend that you treat every interaction with Gemini CLI as a miniature, formal software engineering practice.

*   **Requirements Analysis:** Before writing a prompt, think clearly about what your "requirements" are.
*   **Design:** For complex tasks, first "design" the solution with the AI through conversation (as we did in Case Study 3 of Chapter 10).
*   **Coding:** Let the AI generate the code.
*   **Code Review:** **This is the most critical step.** Never blindly trust the code generated by the AI. Use the IDE-integrated diff view to carefully review every line of change to ensure it meets your expectations, introduces no new bugs, and is safe and reliable. You are ultimately responsible.
*   **Testing:** Let the AI assist you in generating unit or end-to-end tests to verify the correctness of the code.

## Recommendations for Continuous Use of `gemini-cli` in Projects

*   **Establish `GEMINI.md` Standards:** Create a `GEMINI.md` file for each of your projects, defining its tech stack, coding standards, core architecture, etc. This is equivalent to providing the AI with a permanent "onboarding" document for the project.
- **Use `/chat save` and `/chat resume` to build a workflow library:** When you have a successful conversation flow for a common task (like "debug a performance issue" or "release a new version"), save it with a memorable tag using `/chat save <tag>`. This creates a library of best-practice AI workflows for your team.
*   **Combine with Git:** Tightly integrate your Gemini CLI operations with Git version control. After applying a major refactoring or adding a new feature, create a Git commit immediately. This way, even if an AI operation goes wrong, you can easily roll back to the last stable state.

## Security Precautions

The powerful capabilities of AI also come with new security responsibilities. Be sure to keep the following points in mind:

*   **Safeguarding API Keys:** Your Google API key is your credential for accessing the Gemini model and is as important as your password.
    *   **Do not** hardcode your key in your code.
    *   **Do not** commit your `settings.json` file containing the key to a public Git repository. The default configuration of Gemini CLI already places the global settings in `.gitignore`; make sure you don't undermine this.
*   **Beware of Sensitive Information:** When conversing with the AI, especially when referencing files with `@`, ensure you are not providing files containing sensitive information such as passwords, private keys, or customer data as context.
*   **Review Shell Commands:** For shell commands (`!`) suggested by the AI, always review them carefully before confirming. Understand the meaning and potential impact of the command, especially when using `Ctrl+Y` (YOLO mode).

By following these best practices, you will be able to use Gemini CLI more safely and efficiently, turning it into a truly sharp Swiss Army knife in your development toolkit.

## Troubleshooting Common Issues

Even with the best practices, you might occasionally run into issues. Here are solutions to some common problems.

### Authentication and Login Errors
- **Error: `Failed to login... Request contains an invalid argument`**
  - **Cause:** This can happen with Google Workspace or Cloud accounts.
  - **Solution:** For Cloud accounts, try setting the `GOOGLE_CLOUD_PROJECT` environment variable to your project ID. Alternatively, get a free-tier Gemini API key from [Google AI Studio](http://aistudio.google.com/app/apikey) and configure it using `gemini config set`.

- **Error: `UNABLE_TO_GET_ISSUER_CERT_LOCALLY`**
  - **Cause:** You are likely on a corporate network with a firewall that inspects SSL/TLS traffic.
  - **Solution:** Set the `NODE_EXTRA_CA_CERTS` environment variable to the absolute path of your company's root CA certificate file.

### Frequently Asked Questions
- **How do I update to the latest version?**
  - Run `npm install -g @google/gemini-cli@latest`.

- **Why don't I see cached token counts in `/stats`?**
  - This feature is only available for users authenticating with an API key (from Gemini API or Google Cloud Vertex AI), not for users logging in with their personal Google accounts (OAuth).

### Common Error Messages
- **`EADDRINUSE` (Address already in use) when starting an MCP server.**
  - **Cause:** Another process is using the port your MCP server needs.
  - **Solution:** Stop the other process or configure your MCP server to use a different port.

- **`Command not found` after installation.**
  - **Cause:** Your system's `PATH` does not include the `npm` global binary directory.
  - **Solution:** Ensure your `npm` global path is correctly configured in your shell's startup file (e.g., `.zshrc`, `.bash_profile`).

- **`"Operation not permitted"` or `"Permission denied"`**
  - **Cause:** The sandbox is preventing the AI from performing an action outside its allowed scope (e.g., writing to a file outside the project directory).
  - **Solution:** This is expected behavior. If the action is necessary, you may need to adjust your sandbox configuration, but be aware of the security implications.
