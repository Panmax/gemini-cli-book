# 第六章：高效的斜杠 (/) 命令

除了通过提示与 Gemini 模型进行对话，Gemini CLI 还提供了一套强大的“斜杠命令” (Slash Commands)。这些命令以 `/` 开头，用于管理会话、控制上下文、配置工具以及执行其他元操作。它们是提升您在 Gemini CLI 中工作效率的关键。

您可以在交互式会话的提示符 `>` 后输入 `/` 来查看所有可用的命令。本章将详细介绍其中最常用和最重要的部分。

## 常用基础命令

这些是您日常使用中最频繁接触到的命令。

*   **/help:** 显示帮助信息，列出所有可用的斜杠命令及其简要说明。当您忘记某个命令时，这是您的首选。
    ```
    > /help
    ```

*   **/clear:** 清除当前会话的所有历史记录，包括您发送的提示和模型的响应。这会给您一个干净的界面，但请注意，之前的对话上下文也会被一并清除。
    ```
    > /clear
    ```

*   **/stats:** 显示当前会话的统计信息，例如已经进行的对话轮次、使用的 Token 数量等。这对于了解您的使用情况和成本很有帮助。
    ```
    > /stats
    ```

*   **/tools:** 列出当前会话中所有可用的内置工具，例如 `ReadFile`, `GoogleSearch` 等。
    ```
    > /tools
    ```

## 会话与文件状态管理

Gemini CLI 提供了强大的命令来管理您的对话历史和项目文件的状态，为 AI 驱动的修改提供了一道安全防线。

### 管理聊天会话 (`/chat` 命令)

现代的 Gemini CLI 使用一个基于标签 (tag) 的系统来保存和恢复聊天会话。这是对旧版本的一个重要改进，旧版本会将话直接保存为您项目目录中的 `.json` 文件。新方法通过在内部管理这些快照来保持您的工作区整洁，让您可以用一个简单的标签而不是文件名来引用它们。这对于在复杂任务中创建检查点非常有用。

*   **/chat save <标签>:** 将当前对话历史保存在一个特定的、便于记忆的标签下。
    ```
    > /chat save refactor-in-progress
    ```
*   **/chat resume <标签>:** 从一个之前保存的标签中恢复对话历史。
    ```
    > /chat resume refactor-in-progress
    ```
*   **/chat list:** 列出您所有已保存的聊天会话的标签。
    ```
    > /chat list
    ```
*   **/chat delete <标签>:** 删除一个已保存的聊天会话。
    ```
    > /chat delete refactor-in-progress
    ```
这个基于标签的系统非常适合暂停和恢复复杂任务，或创建可复用的工作流模板，而不会弄乱您的文件系统。

#### 实战示例：创建可复用的工作流模板
假设您经常需要为您的 JavaScript 函数生成 Jest 单元测试。您可以为此任务创建一个模板。

**第一步：创建模板会话**
启动一个新的 `gemini` 会话，并提供您定义任务和 AI 角色的初始指令。
```
> 你是一名专门研究 Jest 的测试专家。我将通过引用文件的方式为你提供一个 JavaScript 函数。你的任务是为它生成一个完整的 Jest 单元测试文件。测试应覆盖主要用例和至少一个边界情况。请等待我提供文件。
```

**第二步：保存模板**
现在，用一个便于记忆的标签保存这个初始上下文。
```
> /chat save jest-template
```
模板现在已经保存好了。您可以退出会话。

**第三步：使用模板**
之后，当您需要为一个新函数编写测试时，您只需恢复该模板。
```
> /chat resume jest-template
```
CLI 将恢复您的初始指令。现在，您唯一需要做的就是提供当前任务所需的文件。
```
>好的，这是我的函数：@src/utils/calculator.js
```
然后，Gemini CLI 将会遵循您在模板中定义的规则，为 `calculator.js` 生成 Jest 测试。

### 撤销文件变更 (`/restore`)

这是一个强大的安全功能，它会在任何由 AI 驱动的工具**修改您的文件之前**，自动保存您项目状态的快照。这使您可以安全地试验各种代码变更，因为您知道可以随时撤销它们。

> **请注意:** 此功能默认是禁用的。您必须通过以下任一方式来启用它：
> 1.  使用 `--checkpointing` 标志启动 CLI：`gemini --checkpointing`
> 2.  在您的 `settings.json` 文件中进行设置：
> ```json
> {
>   "general": {
>     "checkpointing": {
>       "enabled": true
>     }
>   }
> }
> ```

一旦启用，每当您批准一个会修改文件系统的工具（如 `write_file`）时，CLI 都会自动创建一个“检查点”。

*   **/restore:** 不带参数运行时，它会列出当前项目所有可用的检查点。
*   **/restore <检查点文件>:** 将您的所有项目文件还原到指定检查点所捕获的状态，并恢复到那一刻的对话历史。
## 上下文管理 (`/memory` 命令)

有效地管理上下文是与 AI 高效协作的关键。`/memory` 命令及其子命令让您能够精确地查看和控制当前提供给模型的上下文信息。

*   **/memory show:** 这是一个非常有用的调试命令。它会显示在**下一次**提交提示时，将要发送给模型的完整上下文，包括系统指令（来自 `GEMINI.md`）、文件内容和对话历史。
    ```
    > @package.json
    > /memory show
    ```
    这能帮助您确认 AI 是否“看到”了您想让它看的信息。

*   **/memory refresh:** 重新从所有 `GEMINI.md` 文件中加载系统指令。当您在会话进行中修改了上下文文件并希望立即生效时，这个命令非常有用，无需重启整个会话。
    ```
    > /memory refresh
    ```

## 其他实用命令

*   **/theme:** 打开一个交互式菜单，允许您选择或自定义界面的颜色主题。
    ```
    > /theme
    ```

*   **/quit** 或 **/exit:** 退出 Gemini CLI 的交互式会话。您也可以使用快捷键 `Ctrl+D`。

熟练掌握这些斜杠命令，将使您对 Gemini CLI 的控制更加得心应手，极大地提升您的工作效率。建议您在实际使用中多加尝试，体会它们带来的便利。
